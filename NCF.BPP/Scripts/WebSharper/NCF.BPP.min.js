(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n;a=window;b=a.NCF=a.NCF||{};c=b.BPP=b.BPP||{};d=c.Client=c.Client||{};e=a.WebSharper;f=e&&e.UI;g=f&&f.Next;h=g&&g.Doc;i=a.IntelliFactory;j=i&&i.Runtime;k=e&&e.Utils;l=e&&e.Concurrency;m=e&&e.Remoting;n=m&&m.AjaxRemotingProvider;d.Main=function(){return h.Element("div",[],[]);};d.init=function(o){a.jQuery("[data-reportId]").each(d.f);};d.f=function(o,p){var q,r;q=p.getAttribute("data-groupId");r=p.getAttribute("data-reportId");p.textContent=(((j.Curried3(function(s,t,u){return s(k.toSafe(t)+" - "+k.toSafe(u));}))(a.id))(q))(r);};d.reportClicked=function(o,p){var q;l.Start((q=null,l.Delay(function(){var r,s,t,u;r=o.parentElement;s=r.getAttribute("data-groupId");t=r.getAttribute("data-reportId");u=r.getAttribute("data-embedUrl");a.jQuery("*").css("cursor","progress");return l.Bind(d.getEmbedToken(s,t),function(v){a.jQuery("*").css("cursor","default");return v.$==1?(a.alert(v.$0),l.Zero()):(d.openReport(o.textContent,u,t,v.$0),l.Zero());});})),null);};d.getEmbedToken=function(o,p){var q;q=null;return l.Delay(function(){return(new n.New()).Async("NCF.BPP:NCF.BPP.Server.getEmbedTokenAsync:-483179291",[o,p]);});};d.openReport=function(o,p,q,r){var s,t,u,v,w,x;s=(t={},t.filterPaneEnabled=true,t.navContentPaneEnabled=true,t);u=(v={},v.type="report",v.tokenType=1,v.accessToken=r,v.embedUrl=p,v.id=q,v.permissions=7,v.settings=s,v);w=a.jQuery("#embedReportHtml").text();x=a.open();x.document.write(w);x.init("NCF.BPP - "+o,u);};}());
